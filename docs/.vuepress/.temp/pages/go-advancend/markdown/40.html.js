export const data = JSON.parse("{\"key\":\"v-077b5de0\",\"path\":\"/go-advancend/markdown/40.html\",\"title\":\"第40节 一站式Golang内存洗髓经(节选)\",\"lang\":\"zh-CN\",\"frontmatter\":{},\"excerpt\":\"\",\"headers\":[{\"level\":3,\"title\":\"Go语言基础篇\",\"slug\":\"go语言基础篇\",\"link\":\"#go语言基础篇\",\"children\":[]},{\"level\":3,\"title\":\"Go语言100篇进阶\",\"slug\":\"go语言100篇进阶\",\"link\":\"#go语言100篇进阶\",\"children\":[]},{\"level\":2,\"title\":\"前言\",\"slug\":\"前言\",\"link\":\"#前言\",\"children\":[]},{\"level\":2,\"title\":\"1 何为内存#\",\"slug\":\"_1-何为内存\",\"link\":\"#_1-何为内存\",\"children\":[{\"level\":3,\"title\":\"图 1 物理内存条#\",\"slug\":\"图-1-物理内存条\",\"link\":\"#图-1-物理内存条\",\"children\":[]},{\"level\":3,\"title\":\"图 2 计算机存储媒介金字塔模型#\",\"slug\":\"图-2-计算机存储媒介金字塔模型\",\"link\":\"#图-2-计算机存储媒介金字塔模型\",\"children\":[]},{\"level\":3,\"title\":\"表 1 硬盘与内存对比表#\",\"slug\":\"表-1-硬盘与内存对比表\",\"link\":\"#表-1-硬盘与内存对比表\",\"children\":[]}]},{\"level\":2,\"title\":\"2 内存为什么需要管理#\",\"slug\":\"_2-内存为什么需要管理\",\"link\":\"#_2-内存为什么需要管理\",\"children\":[{\"level\":3,\"title\":\"表 2 自动与非自动内存管理的语言#\",\"slug\":\"表-2-自动与非自动内存管理的语言\",\"link\":\"#表-2-自动与非自动内存管理的语言\",\"children\":[]}]},{\"level\":2,\"title\":\"3 操作系统是如何管理内存的#\",\"slug\":\"_3-操作系统是如何管理内存的\",\"link\":\"#_3-操作系统是如何管理内存的\",\"children\":[{\"level\":3,\"title\":\"图 3 物理内存布局#\",\"slug\":\"图-3-物理内存布局\",\"link\":\"#图-3-物理内存布局\",\"children\":[]},{\"level\":3,\"title\":\"图 4 物理内存分配的困局#\",\"slug\":\"图-4-物理内存分配的困局\",\"link\":\"#图-4-物理内存分配的困局\",\"children\":[]},{\"level\":3,\"title\":\"3.1 虚拟内存#\",\"slug\":\"_3-1-虚拟内存\",\"link\":\"#_3-1-虚拟内存\",\"children\":[]},{\"level\":3,\"title\":\"图 5 虚拟内存布局#\",\"slug\":\"图-5-虚拟内存布局\",\"link\":\"#图-5-虚拟内存布局\",\"children\":[]},{\"level\":3,\"title\":\"图 6 读时共享，写时复制#\",\"slug\":\"图-6-读时共享-写时复制\",\"link\":\"#图-6-读时共享-写时复制\",\"children\":[]},{\"level\":3,\"title\":\"图 7 虚拟内存从磁盘映射空间#\",\"slug\":\"图-7-虚拟内存从磁盘映射空间\",\"link\":\"#图-7-虚拟内存从磁盘映射空间\",\"children\":[]},{\"level\":3,\"title\":\"3.2 MMU 内存管理单元#\",\"slug\":\"_3-2-mmu-内存管理单元\",\"link\":\"#_3-2-mmu-内存管理单元\",\"children\":[]},{\"level\":3,\"title\":\"图 8 MMU 内存管理单元#\",\"slug\":\"图-8-mmu-内存管理单元\",\"link\":\"#图-8-mmu-内存管理单元\",\"children\":[]},{\"level\":3,\"title\":\"3.3 虚拟内存本身怎么存放#\",\"slug\":\"_3-3-虚拟内存本身怎么存放\",\"link\":\"#_3-3-虚拟内存本身怎么存放\",\"children\":[]},{\"level\":3,\"title\":\"图 9 页、页表、PTE 之间的关系#\",\"slug\":\"图-9-页、页表、pte-之间的关系\",\"link\":\"#图-9-页、页表、pte-之间的关系\",\"children\":[]},{\"level\":3,\"title\":\"图 10 PTE 内部构造#\",\"slug\":\"图-10-pte-内部构造\",\"link\":\"#图-10-pte-内部构造\",\"children\":[]},{\"level\":3,\"title\":\"图 11 CPU、MMU 与 TLB 的交互关系#\",\"slug\":\"图-11-cpu、mmu-与-tlb-的交互关系\",\"link\":\"#图-11-cpu、mmu-与-tlb-的交互关系\",\"children\":[]},{\"level\":3,\"title\":\"表 3 虚拟页被分成的三种子集#\",\"slug\":\"表-3-虚拟页被分成的三种子集\",\"link\":\"#表-3-虚拟页被分成的三种子集\",\"children\":[]},{\"level\":3,\"title\":\"3.4 CPU 内存访问过程#\",\"slug\":\"_3-4-cpu-内存访问过程\",\"link\":\"#_3-4-cpu-内存访问过程\",\"children\":[]},{\"level\":3,\"title\":\"图 12 CPU 内存访问的详细流程#\",\"slug\":\"图-12-cpu-内存访问的详细流程\",\"link\":\"#图-12-cpu-内存访问的详细流程\",\"children\":[]},{\"level\":3,\"title\":\"3.4 内存的局部性#\",\"slug\":\"_3-4-内存的局部性\",\"link\":\"#_3-4-内存的局部性\",\"children\":[]}]},{\"level\":2,\"title\":\"4 如何用 Golang 语言实现内存管理和内存池设计#\",\"slug\":\"_4-如何用-golang-语言实现内存管理和内存池设计\",\"link\":\"#_4-如何用-golang-语言实现内存管理和内存池设计\",\"children\":[{\"level\":3,\"title\":\"4.1 基于 Cgo 的内存 C 接口封装#\",\"slug\":\"_4-1-基于-cgo-的内存-c-接口封装\",\"link\":\"#_4-1-基于-cgo-的内存-c-接口封装\",\"children\":[]},{\"level\":3,\"title\":\"4.2 基础内存缓冲 Buf 实现#\",\"slug\":\"_4-2-基础内存缓冲-buf-实现\",\"link\":\"#_4-2-基础内存缓冲-buf-实现\",\"children\":[]},{\"level\":3,\"title\":\"图 13 Buf 的数据结构布局#\",\"slug\":\"图-13-buf-的数据结构布局\",\"link\":\"#图-13-buf-的数据结构布局\",\"children\":[]},{\"level\":3,\"title\":\"图 14 SetBytes 内存操作#\",\"slug\":\"图-14-setbytes-内存操作\",\"link\":\"#图-14-setbytes-内存操作\",\"children\":[]},{\"level\":3,\"title\":\"图 15 Pop 内存操作的 head 与 length 偏移#\",\"slug\":\"图-15-pop-内存操作的-head-与-length-偏移\",\"link\":\"#图-15-pop-内存操作的-head-与-length-偏移\",\"children\":[]},{\"level\":3,\"title\":\"图 16 Adjust 操作的内存平移#\",\"slug\":\"图-16-adjust-操作的内存平移\",\"link\":\"#图-16-adjust-操作的内存平移\",\"children\":[]},{\"level\":3,\"title\":\"4.3 内存池设计与实现#\",\"slug\":\"_4-3-内存池设计与实现\",\"link\":\"#_4-3-内存池设计与实现\",\"children\":[]},{\"level\":3,\"title\":\"图 17 BufPool 内存池的内存管理布局#\",\"slug\":\"图-17-bufpool-内存池的内存管理布局\",\"link\":\"#图-17-bufpool-内存池的内存管理布局\",\"children\":[]},{\"level\":3,\"title\":\"4.4 内存池的功能单元测试#\",\"slug\":\"_4-4-内存池的功能单元测试\",\"link\":\"#_4-4-内存池的功能单元测试\",\"children\":[]},{\"level\":3,\"title\":\"4.5 内存管理应用接口#\",\"slug\":\"_4-5-内存管理应用接口\",\"link\":\"#_4-5-内存管理应用接口\",\"children\":[]}]},{\"level\":2,\"title\":\"5 Golang 内存管理之魂 TCMalloc#\",\"slug\":\"_5-golang-内存管理之魂-tcmalloc\",\"link\":\"#_5-golang-内存管理之魂-tcmalloc\",\"children\":[{\"level\":3,\"title\":\"5.1 TCMalloc#\",\"slug\":\"_5-1-tcmalloc\",\"link\":\"#_5-1-tcmalloc\",\"children\":[]},{\"level\":3,\"title\":\"图 18 BufPool 内存池与线程 Thread 的关系#\",\"slug\":\"图-18-bufpool-内存池与线程-thread-的关系\",\"link\":\"#图-18-bufpool-内存池与线程-thread-的关系\",\"children\":[]},{\"level\":3,\"title\":\"图 19 TCMalloc 内存池与线程 Thread 的关系#\",\"slug\":\"图-19-tcmalloc-内存池与线程-thread-的关系\",\"link\":\"#图-19-tcmalloc-内存池与线程-thread-的关系\",\"children\":[]},{\"level\":3,\"title\":\"表 4 TCMalloc 的内存分离#\",\"slug\":\"表-4-tcmalloc-的内存分离\",\"link\":\"#表-4-tcmalloc-的内存分离\",\"children\":[]},{\"level\":3,\"title\":\"图 20 TCMalloc 中的 PageHeap#\",\"slug\":\"图-20-tcmalloc-中的-pageheap\",\"link\":\"#图-20-tcmalloc-中的-pageheap\",\"children\":[]},{\"level\":3,\"title\":\"5.2 TCMalloc 模型相关基础结构#\",\"slug\":\"_5-2-tcmalloc-模型相关基础结构\",\"link\":\"#_5-2-tcmalloc-模型相关基础结构\",\"children\":[]},{\"level\":3,\"title\":\"图 21 TCMalloc 将虚拟内存平均分层 N 份 Page#\",\"slug\":\"图-21-tcmalloc-将虚拟内存平均分层-n-份-page\",\"link\":\"#图-21-tcmalloc-将虚拟内存平均分层-n-份-page\",\"children\":[]},{\"level\":3,\"title\":\"图 22 TCMalloc 中 Page 与 Span 的关系#\",\"slug\":\"图-22-tcmalloc-中-page-与-span-的关系\",\"link\":\"#图-22-tcmalloc-中-page-与-span-的关系\",\"children\":[]},{\"level\":3,\"title\":\"图 23 TCMalloc 中 Span 存储形式#\",\"slug\":\"图-23-tcmalloc-中-span-存储形式\",\"link\":\"#图-23-tcmalloc-中-span-存储形式\",\"children\":[]},{\"level\":3,\"title\":\"图 24 TCMalloc 中 Size Class、Page、Span 的结构关系#\",\"slug\":\"图-24-tcmalloc-中-size-class、page、span-的结构关系\",\"link\":\"#图-24-tcmalloc-中-size-class、page、span-的结构关系\",\"children\":[]},{\"level\":3,\"title\":\"5.3 ThreadCache#\",\"slug\":\"_5-3-threadcache\",\"link\":\"#_5-3-threadcache\",\"children\":[]},{\"level\":3,\"title\":\"图 25 TCMalloc 中 ThreadCache#\",\"slug\":\"图-25-tcmalloc-中-threadcache\",\"link\":\"#图-25-tcmalloc-中-threadcache\",\"children\":[]},{\"level\":3,\"title\":\"5.4 CentralCache#\",\"slug\":\"_5-4-centralcache\",\"link\":\"#_5-4-centralcache\",\"children\":[]},{\"level\":3,\"title\":\"图 26 TCMalloc 中 CentralCache#\",\"slug\":\"图-26-tcmalloc-中-centralcache\",\"link\":\"#图-26-tcmalloc-中-centralcache\",\"children\":[]},{\"level\":3,\"title\":\"5.5 PageHeap#\",\"slug\":\"_5-5-pageheap\",\"link\":\"#_5-5-pageheap\",\"children\":[]},{\"level\":3,\"title\":\"图 27 TCMalloc 中 PageHeap#\",\"slug\":\"图-27-tcmalloc-中-pageheap\",\"link\":\"#图-27-tcmalloc-中-pageheap\",\"children\":[]},{\"level\":3,\"title\":\"5.6 TCMalloc 的小对象分配#\",\"slug\":\"_5-6-tcmalloc-的小对象分配\",\"link\":\"#_5-6-tcmalloc-的小对象分配\",\"children\":[]},{\"level\":3,\"title\":\"图 28 TCMalloc 小对象分配流程#\",\"slug\":\"图-28-tcmalloc-小对象分配流程\",\"link\":\"#图-28-tcmalloc-小对象分配流程\",\"children\":[]},{\"level\":3,\"title\":\"5.7 TCMalloc 的中对象分配#\",\"slug\":\"_5-7-tcmalloc-的中对象分配\",\"link\":\"#_5-7-tcmalloc-的中对象分配\",\"children\":[]},{\"level\":3,\"title\":\"图 29 TCMalloc 中对象分配流程#\",\"slug\":\"图-29-tcmalloc-中对象分配流程\",\"link\":\"#图-29-tcmalloc-中对象分配流程\",\"children\":[]},{\"level\":3,\"title\":\"5.8 TCMalloc 的大对象分配#\",\"slug\":\"_5-8-tcmalloc-的大对象分配\",\"link\":\"#_5-8-tcmalloc-的大对象分配\",\"children\":[]},{\"level\":3,\"title\":\"图 30 TCMalloc 大对象分配流程#\",\"slug\":\"图-30-tcmalloc-大对象分配流程\",\"link\":\"#图-30-tcmalloc-大对象分配流程\",\"children\":[]}]},{\"level\":2,\"title\":\"6 Golang 堆内存管理#\",\"slug\":\"_6-golang-堆内存管理\",\"link\":\"#_6-golang-堆内存管理\",\"children\":[{\"level\":3,\"title\":\"6.1 Golang 内存模型层级结构#\",\"slug\":\"_6-1-golang-内存模型层级结构\",\"link\":\"#_6-1-golang-内存模型层级结构\",\"children\":[]},{\"level\":3,\"title\":\"图 31 Golang 内存管理模块关系#\",\"slug\":\"图-31-golang-内存管理模块关系\",\"link\":\"#图-31-golang-内存管理模块关系\",\"children\":[]},{\"level\":3,\"title\":\"6.2 Golang 内存管理单元相关概念#\",\"slug\":\"_6-2-golang-内存管理单元相关概念\",\"link\":\"#_6-2-golang-内存管理单元相关概念\",\"children\":[]},{\"level\":3,\"title\":\"图 32 Object Size 与 Span 的关系#\",\"slug\":\"图-32-object-size-与-span-的关系\",\"link\":\"#图-32-object-size-与-span-的关系\",\"children\":[]},{\"level\":3,\"title\":\"图 33 Span Class 与 Size Class 的逻辑结构关系#\",\"slug\":\"图-33-span-class-与-size-class-的逻辑结构关系\",\"link\":\"#图-33-span-class-与-size-class-的逻辑结构关系\",\"children\":[]},{\"level\":3,\"title\":\"表 5 TCMalloc 的内存分离#\",\"slug\":\"表-5-tcmalloc-的内存分离\",\"link\":\"#表-5-tcmalloc-的内存分离\",\"children\":[]},{\"level\":3,\"title\":\"图 34 Max Waste 最大浪费空间计算公式#\",\"slug\":\"图-34-max-waste-最大浪费空间计算公式\",\"link\":\"#图-34-max-waste-最大浪费空间计算公式\",\"children\":[]},{\"level\":3,\"title\":\"6.3 MCache#\",\"slug\":\"_6-3-mcache\",\"link\":\"#_6-3-mcache\",\"children\":[]},{\"level\":3,\"title\":\"图 35 ThreadCache 与 mcache 的绑定关系区别#\",\"slug\":\"图-35-threadcache-与-mcache-的绑定关系区别\",\"link\":\"#图-35-threadcache-与-mcache-的绑定关系区别\",\"children\":[]},{\"level\":3,\"title\":\"图 36 MCache 内部构造#\",\"slug\":\"图-36-mcache-内部构造\",\"link\":\"#图-36-mcache-内部构造\",\"children\":[]},{\"level\":3,\"title\":\"6.4 MCentral#\",\"slug\":\"_6-4-mcentral\",\"link\":\"#_6-4-mcentral\",\"children\":[]},{\"level\":3,\"title\":\"图 37 Golang 内存管理各层级内存交换单位#\",\"slug\":\"图-37-golang-内存管理各层级内存交换单位\",\"link\":\"#图-37-golang-内存管理各层级内存交换单位\",\"children\":[]},{\"level\":3,\"title\":\"图 38 MCentral 的内部构造#\",\"slug\":\"图-38-mcentral-的内部构造\",\"link\":\"#图-38-mcentral-的内部构造\",\"children\":[]},{\"level\":3,\"title\":\"6.5 MHeap#\",\"slug\":\"_6-5-mheap\",\"link\":\"#_6-5-mheap\",\"children\":[]},{\"level\":3,\"title\":\"图 39 MHeap 内部逻辑层级构造#\",\"slug\":\"图-39-mheap-内部逻辑层级构造\",\"link\":\"#图-39-mheap-内部逻辑层级构造\",\"children\":[]},{\"level\":3,\"title\":\"图 40 MHeap 数据结构引用依赖#\",\"slug\":\"图-40-mheap-数据结构引用依赖\",\"link\":\"#图-40-mheap-数据结构引用依赖\",\"children\":[]},{\"level\":3,\"title\":\"6.6 Tiny 对象分配流程#\",\"slug\":\"_6-6-tiny-对象分配流程\",\"link\":\"#_6-6-tiny-对象分配流程\",\"children\":[]},{\"level\":3,\"title\":\"表 6 Golang 内存与 TCMalloc 对内存的分类对比#\",\"slug\":\"表-6-golang-内存与-tcmalloc-对内存的分类对比\",\"link\":\"#表-6-golang-内存与-tcmalloc-对内存的分类对比\",\"children\":[]},{\"level\":3,\"title\":\"图 41 MCache 中的 Tiny 空间#\",\"slug\":\"图-41-mcache-中的-tiny-空间\",\"link\":\"#图-41-mcache-中的-tiny-空间\",\"children\":[]},{\"level\":3,\"title\":\"图 42 如果微小对象不存在 Tiny 空间中#\",\"slug\":\"图-42-如果微小对象不存在-tiny-空间中\",\"link\":\"#图-42-如果微小对象不存在-tiny-空间中\",\"children\":[]},{\"level\":3,\"title\":\"图 43 MCache 中 Tiny 微小对象分配流程#\",\"slug\":\"图-43-mcache-中-tiny-微小对象分配流程\",\"link\":\"#图-43-mcache-中-tiny-微小对象分配流程\",\"children\":[]},{\"level\":3,\"title\":\"图 44 不用 Tiny 缓冲存储情况#\",\"slug\":\"图-44-不用-tiny-缓冲存储情况\",\"link\":\"#图-44-不用-tiny-缓冲存储情况\",\"children\":[]},{\"level\":3,\"title\":\"6.7 小对象分配流程#\",\"slug\":\"_6-7-小对象分配流程\",\"link\":\"#_6-7-小对象分配流程\",\"children\":[]},{\"level\":3,\"title\":\"图 45 Golang 小对象内存分配流程#\",\"slug\":\"图-45-golang-小对象内存分配流程\",\"link\":\"#图-45-golang-小对象内存分配流程\",\"children\":[]},{\"level\":3,\"title\":\"6.8 大对象分配流程#\",\"slug\":\"_6-8-大对象分配流程\",\"link\":\"#_6-8-大对象分配流程\",\"children\":[]},{\"level\":3,\"title\":\"图 46 Golang 大对象内存分配流程#\",\"slug\":\"图-46-golang-大对象内存分配流程\",\"link\":\"#图-46-golang-大对象内存分配流程\",\"children\":[]}]},{\"level\":2,\"title\":\"7 小结#\",\"slug\":\"_7-小结\",\"link\":\"#_7-小结\",\"children\":[]},{\"level\":2,\"title\":\"END 链接\",\"slug\":\"end-链接\",\"link\":\"#end-链接\",\"children\":[]}],\"git\":{\"updatedTime\":1667736777000,\"contributors\":[{\"name\":\"xiongxinwei\",\"email\":\"3293172751nss@gmail.com\",\"commits\":3}]},\"filePathRelative\":\"go-advancend/markdown/40.md\"}")
